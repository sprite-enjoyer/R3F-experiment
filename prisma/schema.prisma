generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("CONNECTION_STRING")
}

model User {
  email    String @id @db.VarChar(127)
  password String @db.VarChar(127)
  name     String
  dob      Int
  room     Room?
}

model Room {
  id         Int                @id @default(autoincrement())
  ownerEmail String             @unique
  owner      User               @relation(fields: [ownerEmail], references: [email])
  furnitures FurnitureInRooms[]
}

model FurnitureType {
  id        Int         @id @default(autoincrement())
  height    String
  width     String
  capacity  Int
  furniture Furniture[]
}

model Furniture {
  id        Int                @id @default(autoincrement())
  type      Int
  positionX Int
  positionY Int
  locked    Boolean
  isOfType  FurnitureType      @relation(fields: [type], references: [id])
  color     String             @db.VarChar(63)
  rooms     FurnitureInRooms[]
}

model FurnitureInRooms {
  roomID      Int
  furnitureID Int
  room        Room      @relation(fields: [roomID], references: [id])
  furniture   Furniture @relation(fields: [furnitureID], references: [id])

  @@id([roomID, furnitureID])
}

model UnverifiedUser {
  email    String @id
  code     Int    @unique
  password String @db.VarChar(127)
  name     String
  dob      Int
}
